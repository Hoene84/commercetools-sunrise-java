# This file defines all application routes (Higher priority routes first)
# ~~~~

# Untrail url
GET         /*path/                    @controllers.ApplicationController.untrail(path: String)


# ADMIN
# ~~~~~

# Shows the deployed version, artifactId and GIT SHA
GET         /version                   @com.commercetools.sunrise.controllers.VersionController.show
# Shows if the application is healthy
GET         /health                    @com.commercetools.sunrise.controllers.HealthCheckController.show

# Endpoint to manually refresh category tree (otherwise an app restart is required)
GET         /categories/refresh        @com.commercetools.sunrise.controllers.CategoryTreeRefreshController.refresh


# WEB ASSETS
# ~~~~~

# Map static favicon.ico from the public assets to root folder
GET         /favicon.ico                                              @com.commercetools.sunrise.controllers.AssetsController.at(file="img/favicon.ico")
# Map static resources from the public assets
GET         /assets/*file                                             @com.commercetools.sunrise.controllers.AssetsController.at(file)


# HOME
# ~~~~~

GET         /                      @controllers.HomeController.show


# LOCATION
# ~~~~~

# Changes the language of the app
POST        /changeLanguage        @com.commercetools.sunrise.controllers.LocalizationController.changeLanguage(language: String)
# Changes the country of the app
POST        /changeCountry         @com.commercetools.sunrise.controllers.LocalizationController.changeCountry(country: String)


# CART
# ~~~~~

# Shows the details of the cart belonging to the current session
GET         /cart                        @controllers.CartController.show
# Adds the selected product to the cart
POST        /cart/add                    @controllers.CartController.addLineItem
# Changes the quantity of a selected line item from the cart of the current session
POST        /cart/quantity               @controllers.CartController.changeQuantity
# Removes a selected line item from the cart of the current session
POST        /cart/remove                 @controllers.CartController.removeLineItem
# Add a discount code to the cart
POST        /cart/discount/add           @controllers.DiscountCodesController.add
# Add a discount code to the cart
POST        /cart/discount/remove        @controllers.DiscountCodesController.remove


# CHECKOUT
# ~~~~~

# Shows the form to enter shipping address and billing address
GET         /checkout/address            @controllers.CheckoutController.showSetAddressForm
# Processes the form of the shipping address and billing address
POST        /checkout/address            @controllers.CheckoutController.setAddress
# Shows the form to enter shipping address and billing address
GET         /checkout/shipping           @controllers.CheckoutController.showSetShippingForm
# Processes the form of the shipping address and billing address
POST        /checkout/shipping           @controllers.CheckoutController.setShipping
# Shows a form to select the payment method
GET         /checkout/payment            @controllers.CheckoutController.showSetPaymentForm
# Processes the form for selecting a payment method
POST        /checkout/payment                                                       @controllers.CheckoutController.setPayment
# Shows the form to create an order out of the cart of the session
GET         /checkout/confirmation                                                  @controllers.CheckoutController.showPlaceOrderForm
# Processes the order creation
POST        /checkout/confirmation                             @controllers.CheckoutController.placeOrder
# Shows the customer a confirmation for the created order
GET         /checkout/thankyou                                 @controllers.CheckoutController.showOrder


# SIGN UP/IN/OUT
# ~~~~~

# Shows login and signup form
GET         /user/login                                        @controllers.AuthenticationController.show
# Logs in the user
POST        /user/login                                        @controllers.AuthenticationController.logIn
# Registers the user
POST        /user/signup                                       @controllers.AuthenticationController.signUp
# Logs out the user
GET         /user/logout                                       @controllers.AuthenticationController.logOut

# PASSWORD RECOVERY
# ~~~~~

# Show form to enter password recover email
GET         /password/recovery                                 @controllers.ResetPasswordController.showRequestResetPasswordForm
# Send recovery password email
POST        /password/recovery                                 @controllers.ResetPasswordController.requestResetPassword

# View password reset
GET         /password/reset/:token                             @controllers.ResetPasswordController.showResetPasswordForm(token: String)
# Process reset password request
POST        /password/reset                                    @controllers.ResetPasswordController.resetPassword

# MY ACCOUNT
# ~~~~~

# Shows a form for updating the customer's details
GET         /user                                              @controllers.CustomerProfileController.show
# Processes the form for updating the customer's details
POST        /user                                              @controllers.CustomerProfileController.edit

# Shows the form for changing password
GET         /user/password                                     @controllers.ChangePasswordController.show
# Processes the form for changing password
POST        /user/password                                     @controllers.ChangePasswordController.change

# Shows the address book
GET         /user/addressbook                                  @controllers.AddressBookController.show
# Shows the form to add an address to the customer's address book
GET         /user/addressbook/add                              @controllers.AddressBookController.showAddAddressForm
# Adds an address to the customer's address book
POST        /user/addressbook/add                              @controllers.AddressBookController.addAddress
# Shows the form to edit an address from the customer's address book
GET         /user/addressbook/edit/:addressIdentifier          @controllers.AddressBookController.showChangeAddressForm(addressIdentifier: String)
# Updates an address from the customer's address book
POST        /user/addressbook/edit                             @controllers.AddressBookController.changeAddress
# Removes an address from the customer's address book
POST        /user/addressbook/remove                           @controllers.AddressBookController.removeAddress

# Shows all orders from the customer
GET         /user/orders                                       @controllers.OrderHistoryController.list
# Show an order from the customer
GET         /user/orders/:orderIdentifier                      @controllers.OrderHistoryController.show(orderIdentifier: String)


# WISHLIST
# ~~~~~

# Shows the wishlist
GET         /wishlist                                          @controllers.WishlistController.show
# Adds a product variant to the wishlist
POST        /wishlist/add                                      @controllers.WishlistController.addLineItem
# Removes a line item from the wishlist
POST        /wishlist/remove                                   @controllers.WishlistController.removeLineItem


# SEARCH
# ~~~~~

# Shows the search results page
GET         /search                                                   @controllers.ProductsController.search


# PRODUCT DETAIL
# ~~~~~

# Shows the product detail page
GET         /:productIdentifier-$variantIdentifier<[^-]+>.html        @controllers.ProductsController.show(productIdentifier: String, variantIdentifier: String)


# PRODUCT OVERVIEW
# ~~~~~

# Shows the product overview page for this category
GET         /:categoryIdentifier                                      @controllers.ProductsController.list(categoryIdentifier: String)